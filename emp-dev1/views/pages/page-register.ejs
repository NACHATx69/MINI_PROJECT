<div class="container">
  <div class="card-body">
    <div class="py-5 text-center">
    </div>

    <!-- Alert -->
    <% if (post.create === 'success') { %>
      <div class="alert alert-success" id="success-alert">
        การสร้างบัญชีผู้ใช้สำเร็จ
      </div>
    <% }else if (post.create === 'fail') { %>
      <div class="alert alert-danger" id="success-alert">
        การสร้างบัญชีผู้ใช้ไม่สำเร็จ
      </div>
    <% } %>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const successAlert = document.getElementById("success-alert");

        if (successAlert) {
          setTimeout(function () {
            successAlert.classList.add("show");
          }, 100); 

          setTimeout(function () {
            successAlert.classList.remove("show");
          }, 5000); 
        }
      });
    </script>

    <div class="row g-5 justify-content-center">
      <div class="col-md-7 col-lg-8">
        <h2 class="border-bottom pb-2">สร้างบัญชีผู้ใช้</h2>

        <div class="row g-3 mt-5 justify-content-end">
          <div class="col-10 ">
            <h5 class="mb-3 text-end">รหัสพนักงาน</h5>
          </div> 
          <div class="col-2">
            <h6>
              <span class="badge bg-primary rounded-pill">#<%= post.empID %></span>
            </h6>
          </div>
        </div>
      
        <form class="needs-validation" novalidate action="/welcome" method="post">
          <div class="row g-3">
            
            <div class="col-sm-12" style="display: none;">
              <label for="firstName" class="form-label">รหัสพนักงาน</label>
              <input type="text" class="form-control" id="EMP_ID" name="EMP_ID" value="<%= post.empID %>" required readonly>
              <div class="invalid-feedback">
                Valid first name is required.
              </div>
            </div>
            <div class="col-sm-8">
            </div>

            <div class="col-sm-6">
              <label for="lastName" class="form-label">ชื่อ</label>
              <input type="text" class="form-control" id="FNAME" name="FNAME" placeholder="" value="" required>
              <div class="invalid-feedback">
                Valid last name is required.
              </div>
            </div>

            <div class="col-sm-6">
              <label for="lastName" class="form-label">นามสกุล</label>
              <input type="text" class="form-control" id="LNAME" name="LNAME" placeholder="" value="" required>
              <div class="invalid-feedback">
                Valid last name is required.
              </div>
            </div>

            <div class="col-sm-6">
              <label for="firstName" class="form-label">ชื่อบัญชี</label>
              <input type="text" class="form-control" id="USERNAME" name="USERNAME" placeholder="" value="" required>
              <div class="invalid-feedback">
                Valid first username is required.
              </div>
            </div>

            <div class="col-sm-6">
              <label for="lastName" class="form-label">รหัสผ่าน</label>
              <input type="text" class="form-control" id="PASS" name="PASS" placeholder="" value="" required>
              <div class="invalid-feedback">
                Valid last password is required.
              </div>
            </div>

            <div class="col-md-12">
              <label for="country" class="form-label">ผู้จัดการ</label>
              <select class="form-select" id="MGR_ID" name="MGR_ID" required>
                <option value="" selected>ระบุ....</option> 
                  <% post.mgr.forEach(mgrName => { %>
                    <option value="<%= mgrName.MGR_ID %>"><%= mgrName.FNAME %> <%= mgrName.LNAME %></option>
                  <% }); %>
              </select>
              <div class="invalid-feedback">
                Please select a valid manager.
              </div>
            </div>

            <div class="col-md-5">
              <label for="country" class="form-label">ตำแหน่ง</label>
              <select class="form-select" id="POSITIONS" name="POSITIONS" required>
                  <option value="" selected>ระบุ....</option> 
                  <% post.posittion.forEach(possit => { %>
                    <option value="<%= possit.POS_ID %>"><%= possit.POS_NAME %></option>
                  <% }); %>
                </select>
              </select>
              <div class="invalid-feedback">
                Please select a valid position.
              </div>
            </div>

            <div class="col-md-7">
              <label for="state" class="form-label">แผนก</label>
              <select class="form-select" id="DEPARTMENT" name="DEPARTMENT" required>
                <option value="" selected>ระบุ....</option> 
                  <% post.mgr.forEach(dept => { %>
                    <option value="<%= dept.DEPT_ID %>"><%= dept.DEPT_NAME %></option>
                  <% }); %>
              </select>
              <div class="invalid-feedback">
                Please provide a valid department.
              </div>
            </div>

            <div class="col-md-5">
              <label for="state" class="form-label">วันที่เริ่มงาน</label>
              <input type="date" class="form-control" id="HIREDATE" name="HIREDATE" placeholder="" value="" required>
              <div class="invalid-feedback">
                Please provide a valid hire date.
              </div>
            </div>

          </div>
          <hr class="my-4">
          
          <div class="col justify-content-center" >
            <div class="row justify-content-center">
              <button class="w-50 btn btn-primary btn-lg mt-4" type="submit">สร้างบัญชีผู้ใช้</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div style="height: 100vh;">

  </div>
</div>